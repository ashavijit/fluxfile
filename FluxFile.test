var PROJECT = testapp
var VERSION = 1.0.0
var MODE = dev

task test-desc:
    desc: Testing task descriptions
    run:
        echo "Description feature"

task test-deps:
    desc: Testing dependencies
    deps: dep-a, dep-b
    run:
        echo "All dependencies completed"

task dep-a:
    run:
        echo "Dependency A"

task dep-b:
    run:
        echo "Dependency B"

task test-parallel:
    desc: Testing parallel execution
    deps: par-1, par-2
    parallel: true
    run:
        echo "Parallel deps done"

task par-1:
    run:
        timeout 1
        echo "Parallel 1"

task par-2:
    run:
        timeout 1
        echo "Parallel 2"

task test-conditional-true:
    desc: Testing conditional (should run)
    if: MODE == dev
    run:
        echo "Condition TRUE - executed"

task test-conditional-false:
    desc: Testing conditional (should skip)
    if: MODE == prod
    run:
        echo "Condition FALSE - should NOT see this"

task test-env:
    desc: Testing environment variables
    env:
        TEST_VAR = hello
        ANOTHER = world
    run:
        echo "Env vars set"

task test-cache:
    desc: Testing cache
    cache: true
    inputs:
        *.go
    outputs:
        test-cache.txt
    run:
        echo "cached" > test-cache.txt

task test-retry:
    desc: Testing retry logic
    retries: 2
    retry_delay: 1s
    run:
        echo "Retry test"

task test-timeout:
    desc: Testing timeout
    timeout: 10s
    run:
        echo "Within timeout"

task test-matrix:
    desc: Testing matrix builds
    matrix:
        os: linux, windows
        arch: amd64, arm64
    run:
        echo "Matrix: ${os}-${arch}"

task test-profile:
    desc: Testing task-level profile
    profile_task: testprof
    run:
        echo "Profile applied

"

profile testprof:
    env:
        PROFILE_VAR = from_profile
